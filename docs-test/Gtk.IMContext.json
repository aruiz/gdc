{
    "constructors": [],
    "doc": "<p><span data-xref=\"Gtk.IMContext\"/> defines the interface for GTK+ input methods. An input method\nis used by GTK+ text input widgets like <span data-xref=\"Gtk.Entry\"/> to map from key events to\nUnicode character strings.</p><p>The default input method can be set programmatically via the\n<span data-xref=\"Gtk.Settings-gtk-im-module\"/> GtkSettings property. Alternatively, you may set\nthe GTK_IM_MODULE environment variable as documented in\n[Running GTK+ Applications][gtk-running].</p><p>The <span data-xref=\"Gtk.Entry\"/> <span data-xref=\"Gtk.Entry-im-module\"/> and <span data-xref=\"Gtk.TextView\"/> <span data-xref=\"Gtk.TextView-im-module\"/>\nproperties may also be used to set input methods for specific widget\ninstances. For instance, a certain entry widget might be expected to contain\ncertain characters which would be easier to input with a certain input\nmethod.</p><p>An input method may consume multiple key events in sequence and finally\noutput the composed result. This is called preediting, and an input method\nmay provide feedback about this process by displaying the intermediate\ncomposition states as preedit text. For instance, the default GTK+ input\nmethod implements the input of arbitrary Unicode code points by holding down\nthe Control and Shift keys and then typing \u201cU\u201d followed by the hexadecimal\ndigits of the code point.  When releasing the Control and Shift keys,\npreediting ends and the character is inserted as text. Ctrl+Shift+u20AC for\nexample results in the \u20ac sign.</p><p>Additional input methods can be made available for use by GTK+ widgets as\nloadable modules. An input method module is a small shared library which\nimplements a subclass of <span data-xref=\"Gtk.IMContext\"/> or <span data-xref=\"Gtk.IMContextSimple\"/> and exports\nthese four functions:</p><p>|[<!-- language=\"C\" -->\nvoid im_module_init(<span data-xref=\"GObject.TypeModule\">GObject.TypeModule</span> *module);\n]|\nThis function should register the <span data-xref=\"GLib.Type\">GLib.Type</span> of the <span data-xref=\"Gtk.IMContext\"/> subclass which\nimplements the input method by means of <span data-xref=\"GObject.TypeModule.register_type\">GObject.TypeModule.prototype.register_type</span>. Note\nthat <span data-xref=\"GObject.type_register_static\">GObject.type_register_static</span> cannot be used as the type needs to be\nregistered dynamically.</p><p>|[<!-- language=\"C\" -->\nvoid im_module_exit(void);\n]|\nHere goes any cleanup code your input method might require on module unload.</p><p>|[<!-- language=\"C\" -->\nvoid im_module_list(const <span data-xref=\"Gtk.IMContextInfo\"/> <em><em><em>contexts, int </em>n_contexts)\n{\n  </em>contexts = info_list;\n  </em>n_contexts = G_N_ELEMENTS (info_list);\n}\n]|\nThis function returns the list of input methods provided by the module. The\nexample implementation above shows a common solution and simply returns a\npointer to statically defined array of <span data-xref=\"Gtk.IMContextInfo\"/> items for each\nprovided input method.</p><p>|[<!-- language=\"C\" -->\n<span data-xref=\"Gtk.IMContext\"/> * im_module_create(const #gchar *context_id);\n]|\nThis function should return a pointer to a newly created instance of the\n<span data-xref=\"Gtk.IMContext\"/> subclass identified by @context_id. The context ID is the same\nas specified in the <span data-xref=\"Gtk.IMContextInfo\"/> array returned by im_module_list().</p><p>After a new loadable input method module has been installed on the system,\nthe configuration file <code>gtk.immodules</code> needs to be\nregenerated by [gtk-query-immodules-3.0][gtk-query-immodules-3.0],\nin order for the new input method to become available to GTK+ applications.</p>",
    "kind": "class",
    "methods": [
        {
            "doc": "<p>Asks the widget that the input context is attached to to delete\ncharacters around the cursor position by emitting the\nGtkIMContext::delete_surrounding signal. Note that <pre>offset</pre> and <pre>n_chars</pre>\nare in characters not in bytes which differs from the usage other\nplaces in <span data-xref=\"Gtk.IMContext\"/>.</p><p>In order to use this function, you should first call\n<span data-xref=\"Gtk.IMContext.get_surrounding\"/> to get the current context, and\ncall this function immediately afterwards to make sure that you\nknow what you are deleting. You should also account for the fact\nthat even if the signal was handled, the input context might not\nhave deleted all the characters that were requested to be deleted.</p><p>This function is used by an input method that wants to make\nsubsitutions in the existing text in response to new input. It is\nnot useful for applications.</p>",
            "kind": "method",
            "name": "delete_surrounding",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "offset",
                    "direction": "in",
                    "type": "Number(gint)"
                },
                {
                    "allow_none": false,
                    "argname": "n_chars",
                    "direction": "in",
                    "type": "Number(gint)"
                }
            ],
            "retval": {
                "type": "Boolean"
            }
        },
        {
            "doc": "<p>Allow an input method to internally handle key press and release\nevents. If this function returns <pre>true</pre>, then no further processing\nshould be done for this key event.</p>",
            "kind": "method",
            "name": "filter_keypress",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "event",
                    "direction": "in",
                    "type": "Gdk.EventKey"
                }
            ],
            "retval": {
                "type": "Boolean"
            }
        },
        {
            "doc": "<p>Notify the input method that the widget to which this\ninput context corresponds has gained focus. The input method\nmay, for example, change the displayed feedback to reflect\nthis change.</p>",
            "kind": "method",
            "name": "focus_in",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Notify the input method that the widget to which this\ninput context corresponds has lost focus. The input method\nmay, for example, change the displayed feedback or reset the contexts\nstate to reflect this change.</p>",
            "kind": "method",
            "name": "focus_out",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Retrieve the current preedit string for the input context,\nand a list of attributes to apply to the string.\nThis string should be displayed inserted at the insertion\npoint.</p>",
            "kind": "method",
            "name": "get_preedit_string",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "str",
                    "direction": "out",
                    "type": "String"
                },
                {
                    "allow_none": false,
                    "argname": "attrs",
                    "direction": "out",
                    "type": "Pango.AttrList"
                },
                {
                    "allow_none": false,
                    "argname": "cursor_pos",
                    "direction": "out",
                    "type": "Number(gint)"
                }
            ],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Retrieves context around the insertion point. Input methods\ntypically want context in order to constrain input text based on\nexisting text; this is important for languages such as Thai where\nonly some sequences of characters are allowed.</p><p>This function is implemented by emitting the\nGtkIMContext::retrieve_surrounding signal on the input method; in\nresponse to this signal, a widget should provide as much context as\nis available, up to an entire paragraph, by calling\n<span data-xref=\"Gtk.IMContext.set_surrounding\"/>. Note that there is no obligation\nfor a widget to respond to the ::retrieve_surrounding signal, so input\nmethods must be prepared to function without context.</p>",
            "kind": "method",
            "name": "get_surrounding",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "text",
                    "direction": "out",
                    "type": "String"
                },
                {
                    "allow_none": false,
                    "argname": "cursor_index",
                    "direction": "out",
                    "type": "Number(gint)"
                }
            ],
            "retval": {
                "type": "Boolean"
            }
        },
        {
            "doc": "<p>Notify the input method that a change such as a change in cursor\nposition has been made. This will typically cause the input\nmethod to clear the preedit state.</p>",
            "kind": "method",
            "name": "reset",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Set the client window for the input context; this is the\n<span data-xref=\"Gdk.Window\">Gdk.Window</span> in which the input appears. This window is\nused in order to correctly position status windows, and may\nalso be used for purposes internal to the input method.</p>",
            "kind": "method",
            "name": "set_client_window",
            "parameters": [
                {
                    "allow_none": true,
                    "argname": "window",
                    "direction": "in",
                    "type": "Gdk.Window"
                }
            ],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Notify the input method that a change in cursor\nposition has been made. The location is relative to the client\nwindow.</p>",
            "kind": "method",
            "name": "set_cursor_location",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "area",
                    "direction": "in",
                    "type": "Gdk.Rectangle"
                }
            ],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Sets surrounding context around the insertion point and preedit\nstring. This function is expected to be called in response to the\nGtkIMContext::retrieve_surrounding signal, and will likely have no\neffect if called at other times.</p>",
            "kind": "method",
            "name": "set_surrounding",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "text",
                    "direction": "in",
                    "type": "String"
                },
                {
                    "allow_none": false,
                    "argname": "len",
                    "direction": "in",
                    "type": "Number(gint)"
                },
                {
                    "allow_none": false,
                    "argname": "cursor_index",
                    "direction": "in",
                    "type": "Number(gint)"
                }
            ],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Sets whether the IM context should use the preedit string\nto display feedback. If <pre>use_preedit</pre> is FALSE (default\nis TRUE), then the IM context may use some other method to display\nfeedback, such as displaying it in a child of the root window.</p>",
            "kind": "method",
            "name": "set_use_preedit",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "use_preedit",
                    "direction": "in",
                    "type": "Boolean"
                }
            ],
            "retval": {
                "type": "void"
            }
        }
    ],
    "name": "IMContext",
    "properties": [
        {
            "doc": "",
            "kind": "property",
            "name": "input-hints",
            "type": "Gtk.InputHints"
        },
        {
            "doc": "",
            "kind": "property",
            "name": "input-purpose",
            "type": "Gtk.InputPurpose"
        }
    ],
    "signals": [
        {
            "doc": "<p>The ::commit signal is emitted when a complete input sequence\nhas been entered by the user. This can be a single character\nimmediately after a key press or the final result of preediting.</p>",
            "kind": "signal",
            "name": "commit",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "str",
                    "direction": "in",
                    "type": "String"
                }
            ],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>The ::delete-surrounding signal is emitted when the input method\nneeds to delete all or part of the context surrounding the cursor.</p>",
            "kind": "signal",
            "name": "delete-surrounding",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "offset",
                    "direction": "in",
                    "type": "Number(gint)"
                },
                {
                    "allow_none": false,
                    "argname": "n_chars",
                    "direction": "in",
                    "type": "Number(gint)"
                }
            ],
            "retval": {
                "type": "Boolean"
            }
        },
        {
            "doc": "<p>The ::preedit-changed signal is emitted whenever the preedit sequence\ncurrently being entered has changed.  It is also emitted at the end of\na preedit sequence, in which case\n<span data-xref=\"Gtk.IMContext.get_preedit_string\"/> returns the empty string.</p>",
            "kind": "signal",
            "name": "preedit-changed",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>The ::preedit-end signal is emitted when a preediting sequence\nhas been completed or canceled.</p>",
            "kind": "signal",
            "name": "preedit-end",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>The ::preedit-start signal is emitted when a new preediting sequence\nstarts.</p>",
            "kind": "signal",
            "name": "preedit-start",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>The ::retrieve-surrounding signal is emitted when the input method\nrequires the context surrounding the cursor.  The callback should set\nthe input method surrounding context by calling the\n<span data-xref=\"Gtk.IMContext.set_surrounding\"/> method.</p>",
            "kind": "signal",
            "name": "retrieve-surrounding",
            "parameters": [],
            "retval": {
                "type": "Boolean"
            }
        }
    ],
    "vfuncs": [
        {
            "doc": "",
            "kind": "vfunc",
            "name": "commit",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "str",
                    "direction": "in",
                    "type": "String"
                }
            ],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Asks the widget that the input context is attached to to delete\ncharacters around the cursor position by emitting the\nGtkIMContext::delete_surrounding signal. Note that <pre>offset</pre> and <pre>n_chars</pre>\nare in characters not in bytes which differs from the usage other\nplaces in <span data-xref=\"Gtk.IMContext\"/>.</p><p>In order to use this function, you should first call\n<span data-xref=\"Gtk.IMContext.get_surrounding\"/> to get the current context, and\ncall this function immediately afterwards to make sure that you\nknow what you are deleting. You should also account for the fact\nthat even if the signal was handled, the input context might not\nhave deleted all the characters that were requested to be deleted.</p><p>This function is used by an input method that wants to make\nsubsitutions in the existing text in response to new input. It is\nnot useful for applications.</p>",
            "kind": "vfunc",
            "name": "delete_surrounding",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "offset",
                    "direction": "in",
                    "type": "Number(gint)"
                },
                {
                    "allow_none": false,
                    "argname": "n_chars",
                    "direction": "in",
                    "type": "Number(gint)"
                }
            ],
            "retval": {
                "type": "Boolean"
            }
        },
        {
            "doc": "<p>Allow an input method to internally handle key press and release\nevents. If this function returns <pre>true</pre>, then no further processing\nshould be done for this key event.</p>",
            "kind": "vfunc",
            "name": "filter_keypress",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "event",
                    "direction": "in",
                    "type": "Gdk.EventKey"
                }
            ],
            "retval": {
                "type": "Boolean"
            }
        },
        {
            "doc": "<p>Notify the input method that the widget to which this\ninput context corresponds has gained focus. The input method\nmay, for example, change the displayed feedback to reflect\nthis change.</p>",
            "kind": "vfunc",
            "name": "focus_in",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Notify the input method that the widget to which this\ninput context corresponds has lost focus. The input method\nmay, for example, change the displayed feedback or reset the contexts\nstate to reflect this change.</p>",
            "kind": "vfunc",
            "name": "focus_out",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Retrieve the current preedit string for the input context,\nand a list of attributes to apply to the string.\nThis string should be displayed inserted at the insertion\npoint.</p>",
            "kind": "vfunc",
            "name": "get_preedit_string",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "str",
                    "direction": "out",
                    "type": "String"
                },
                {
                    "allow_none": false,
                    "argname": "attrs",
                    "direction": "out",
                    "type": "Pango.AttrList"
                },
                {
                    "allow_none": false,
                    "argname": "cursor_pos",
                    "direction": "out",
                    "type": "Number(gint)"
                }
            ],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Retrieves context around the insertion point. Input methods\ntypically want context in order to constrain input text based on\nexisting text; this is important for languages such as Thai where\nonly some sequences of characters are allowed.</p><p>This function is implemented by emitting the\nGtkIMContext::retrieve_surrounding signal on the input method; in\nresponse to this signal, a widget should provide as much context as\nis available, up to an entire paragraph, by calling\n<span data-xref=\"Gtk.IMContext.set_surrounding\"/>. Note that there is no obligation\nfor a widget to respond to the ::retrieve_surrounding signal, so input\nmethods must be prepared to function without context.</p>",
            "kind": "vfunc",
            "name": "get_surrounding",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "text",
                    "direction": "out",
                    "type": "String"
                },
                {
                    "allow_none": false,
                    "argname": "cursor_index",
                    "direction": "out",
                    "type": "Number(gint)"
                }
            ],
            "retval": {
                "type": "Boolean"
            }
        },
        {
            "doc": "",
            "kind": "vfunc",
            "name": "preedit_changed",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "",
            "kind": "vfunc",
            "name": "preedit_end",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "",
            "kind": "vfunc",
            "name": "preedit_start",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Notify the input method that a change such as a change in cursor\nposition has been made. This will typically cause the input\nmethod to clear the preedit state.</p>",
            "kind": "vfunc",
            "name": "reset",
            "parameters": [],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "",
            "kind": "vfunc",
            "name": "retrieve_surrounding",
            "parameters": [],
            "retval": {
                "type": "Boolean"
            }
        },
        {
            "doc": "<p>Set the client window for the input context; this is the\n<span data-xref=\"Gdk.Window\">Gdk.Window</span> in which the input appears. This window is\nused in order to correctly position status windows, and may\nalso be used for purposes internal to the input method.</p>",
            "kind": "vfunc",
            "name": "set_client_window",
            "parameters": [
                {
                    "allow_none": true,
                    "argname": "window",
                    "direction": "in",
                    "type": "Gdk.Window"
                }
            ],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Notify the input method that a change in cursor\nposition has been made. The location is relative to the client\nwindow.</p>",
            "kind": "vfunc",
            "name": "set_cursor_location",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "area",
                    "direction": "in",
                    "type": "Gdk.Rectangle"
                }
            ],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Sets surrounding context around the insertion point and preedit\nstring. This function is expected to be called in response to the\nGtkIMContext::retrieve_surrounding signal, and will likely have no\neffect if called at other times.</p>",
            "kind": "vfunc",
            "name": "set_surrounding",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "text",
                    "direction": "in",
                    "type": "String"
                },
                {
                    "allow_none": false,
                    "argname": "len",
                    "direction": "in",
                    "type": "Number(gint)"
                },
                {
                    "allow_none": false,
                    "argname": "cursor_index",
                    "direction": "in",
                    "type": "Number(gint)"
                }
            ],
            "retval": {
                "type": "void"
            }
        },
        {
            "doc": "<p>Sets whether the IM context should use the preedit string\nto display feedback. If <pre>use_preedit</pre> is FALSE (default\nis TRUE), then the IM context may use some other method to display\nfeedback, such as displaying it in a child of the root window.</p>",
            "kind": "vfunc",
            "name": "set_use_preedit",
            "parameters": [
                {
                    "allow_none": false,
                    "argname": "use_preedit",
                    "direction": "in",
                    "type": "Boolean"
                }
            ],
            "retval": {
                "type": "void"
            }
        }
    ]
}